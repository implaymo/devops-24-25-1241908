# CA1, Part 2: Technical Report : Tutorial application to Gradle

### Introduction
This guide focuses on practicing Gradle and creating a Spring Boot application. You will set up and modify a Gradle project, add custom tasks, and integrate unit testing. Key tasks include executing the provided application, adding Gradle tasks for running a server, performing backups, and creating a zip archive. Proper version control practices, including multiple commits, tagging, and using issues, are required.

### Steps to Follow
1. **Create a New Branch:**
    - Name: `tut-basic-gradle`
    - Checkout the branch and use it for all modifications.

2. **Initialize a Gradle Project:**
    - Use [Spring Initializr](https://start.spring.io) to generate a Gradle-based Spring Boot project.
    - Choose the following requirements:
      - Project:
        - Gradle - Groovy
      - Language: 
        - Java
      - Spring Boot:
        - 3.4.3
      - Packaging:
        - Jar
      - Java:
        - 17
    - Select dependencies:
        - Rest Repositories
        - Thymeleaf
        - JPA
        - H2

3. **Extract and Set Up the Project:**
    - Extract the generated zip into `CA1/Part3/`.
    - Verify available Gradle tasks using `./gradlew tasks`.

4. **Replace Source Code:**
    - Delete the `src` folder from the new project.
    - Copy `src` from the `basic` folder, `webpack.config.js` and `package.json` of [this](https://github.com/spring-attic/tut-react-and-spring-data-rest) tutorial.
    - Delete `src/main/resources/static/built/` (it will be generated via Webpack).

5. **Run the Application:**
    - Execute `./gradlew bootRun`.
    - Observe that `http://localhost:8080` is empty due to missing frontend plugin.

6. **Add Frontend Support:**
- Include the Gradle plugin: `org.siouan.frontend` ([Plugin Documentation](https://github.com/Siouan/frontend-gradle-plugin)).
- Modify `build.gradle` by adding one of the following lines depending on the Java version:
  ```groovy
  id "org.siouan.frontend-jdk8" version "6.0.0"
  id "org.siouan.frontend-jdk11" version "8.0.0"
  id "org.siouan.frontend-jdk17" version "8.0.0"
  ```
- Configure the plugin in `build.gradle`:
  ```groovy
  frontend {
   nodeVersion = "16.20.2"
   assembleScript = "run build"
   cleanScript = "run clean"
   checkScript = "run check"
   packageJsonDirectory = file("${projectDir}")
  }
  ```

7. **Configure Webpack Execution in `package.json`:**
   ```json
   "scripts": {
    "webpack": "webpack",
    "build": "npm run webpack",
    "check": "echo Checking frontend",
    "clean": "echo Cleaning frontend",
    "lint": "echo Linting frontend",
    "test": "echo Testing frontend"
   },
   ```

8. **Build and Run Application:**
    - Execute `./gradlew build`.
    - Run `./gradlew bootRun`.


9. **Automate Jar Deployment:**
    - Add a Gradle task to copy the generated JAR to a `dist` folder at the root level.
   ```groovy
   tasks.register('copyJarToDist', Copy) {
	dependsOn jar
	from jar.archiveFile
	into "${projectDir}/dist"
	doFirst {
		mkdir "${projectDir}/dist"
    }
   }
   ```

10. **Clean Generated Frontend Files:**
    - Create a Gradle task to remove files generated by Webpack (`src/main/resources/static/built/`) and ensure this task runs before `clean`.
    ```groovy
    tasks.register('cleanWebpack', Delete) {
	group = 'build'
	description = 'Deletes all files generated by webpack'
	delete "${projectDir}/src/main/resources/static/built/"
	doFirst {
		println "Cleaning webpack output directory at: ${projectDir}/src/resources/main/static/built/"
        }
    }
    
    tasks.named('clean') {
    dependsOn('cleanWebpack')
    }
    ```

11. **Testing and Finalization:**
    - Experiment with the application and validate all features.
    - Commit changes incrementally.
    - Merge the `tut-basic-gradle` branch into `main`.

13. **Tagging the Repository:**
    - Mark the repository with the tag `ca1-part3` upon completion.
    ```sh
    git tag ca1-part3
    git push origin ca1-part3
    ```

## Technical Report
This section provides an overview of the conversion from Maven to Gradle and insights into key decisions made.

### Analysis of Alternatives
- **Maven vs. Gradle:**
    - Maven follows a declarative approach (`pom.xml`), whereas Gradle allows scripting (`build.gradle`).
    - Gradle provides better performance with incremental builds.
    - The frontend integration via `frontend-gradle-plugin` streamlines Webpack execution.

- **Why Use Gradle?**
    - Simplifies dependency management.
    - Provides flexibility with task automation.
    - Better support for multi-module projects.

### Conclusion
Converting the project from Maven to Gradle enhances build automation and flexibility. The frontend integration was successfully managed using the `frontend-gradle-plugin`, ensuring a smooth development workflow.



